version: '3.8'

services:
  comfyui:
    build: .
    container_name: comfyui-paddleocr
    restart: unless-stopped
    ports:
      - "8188:8188"
    volumes:
      # Mount the current directory (the custom node) into ComfyUI's custom_nodes directory
      - .:/comfyui/custom_nodes/ComfyUI-PaddleOCR-VL
      # Persist output and input directories if needed (optional, for convenience)
      # - ./output:/comfyui/output
      # - ./input:/comfyui/input
    environment:
      - CLI_ARGS=--listen --preview-method auto
    deploy:
      resources:
        reservations:
          devices:
            - driver: nvidia
              count: all
              capabilities: [gpu]
